<script src="/labkey/snprc_mobile/app/widget.js" type="application/javascript"></script>
<style>
    #fake-root {
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        font-family: 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        text-align: left;
        padding: 16px;
        box-sizing: border-box;
    }

    #widget-title {
        width: 100%;
        text-align: left;
    }

    #procedure-entry-widget {
        width: 100%;
        height: 600px;
        border: 2px solid grey;
        box-shadow: 0px 0px 4px grey;
        box-sizing: border-box;
    }

    #update-report {
        background-color: #fff;
        border: 1px solid #95989a;
        border-bottom-color: #5b5b5b;
        border-radius: 1px;
        color: #5b5b5b;
        font-size: 12px;
        font-family: Roboto,Arial,Helvetica,sans-serif;
        font-weight: 700;
        background-image: -webkit-linear-gradient(top,#fff,#f0f0f0);
        height: 26px;
        margin: 12px 0;
    }

    #snprc-inputs {
        width: 100%;
        text-align: left;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        margin-bottom: 24px;
    }
</style>

<div id="fake-root">
    <h1 id="widget-title">LabKey Procedure Entry Widget</h1>
    <div id="snprc-inputs">
        <label for="subject-id">Subject ID: <input id="subject-id" type="text" value="31415"> </label>
        <button id="update-report">Update Report</button>
    </div>

    <div id="procedure-entry-widget"></div>
</div>


<script>
    const updateReportButton = document.getElementById('update-report')
    const subjectIDElement = document.getElementById('subject-id')
    const ProcedureEntryWidget = document.getElementById('procedure-entry-widget')

    ProcedureEntryWidget.setAttribute('data-subject-id', subjectIDElement.value)

    updateReportButton.onclick = () => {
        ProcedureEntryWidget.setAttribute('data-subject-id', subjectIDElement.value)
    }

    subjectIDElement.onkeydown = event => {
        if (event.keyCode === 13) {
            ProcedureEntryWidget.setAttribute('data-subject-id', subjectIDElement.value)
        }
    }
</script>